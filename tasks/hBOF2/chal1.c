#include "chal1.h"

void win()
{
  system("/bin/sh");
}

void menu()
{
  puts("[1] Change name");
  puts("[2] Change age");
  puts("[3] Say hello");
  puts("[4] Print info");
  puts("[5] Exit");
}

void hello()
{
  printf("Hi, there's nothing here :)\n");
}

int main()
{ 
  int choice;
  Person *person= malloc(sizeof(struct Person));
  strcpy(person->name, "BOTIK");   
  person->age = 999;
  person->greet_func = hello;
  printf("Hello %s, ur age is %d\n\n", person->name, person->age);
  while(1)
    {
      menu();
      printf("Choose option:\n");
      if(!scanf("%d", &choice))
        break;
      switch (choice) {
        case 1:
          printf("Input ur name:\n");
          scanf("%s", person->name);
          printf("Now my name is %s\n\n", person->name);
          continue;
        case 2:
          printf("Input ur age:\n");
          if(!scanf("%d", &person->age))
            break;
          printf("Now my age is %d\n\n", person->age);
          continue;
        case 3:
          person->greet_func();
          continue;
        case 4:
          printf("Hello %s, ur age is %d\n\n", person->name, person->age);
          continue;
        case 5:
          printf("Bye)\n");
          break;
        default:
          printf("There is no such option\n");
          continue;
      }
      break;
    }

  free(person);
  return 0;
}
